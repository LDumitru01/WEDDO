<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Golden Thread | Destiny</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.29/bundled/lenis.min.js"></script>
    
    <link href="https://api.fontshare.com/v2/css?f[]=boska@200,300,400,500,700,900&f[]=satoshi@300,400,500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Mrs+Saint+Delafield&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg: #121212;
            --text: #F2F2F2;
            --gold: #D4AF37;
            --gold-dim: #6d5a1c;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Satoshi', sans-serif;
            overflow-x: hidden;
            margin: 0;
        }

        .font-serif { font-family: 'Boska', serif; }
        .font-hand { font-family: 'Mrs Saint Delafield', cursive; }

        /* === 1. SVG CANVAS (THE LIFELINE) === */
        .line-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 0; overflow: visible;
        }
        path {
            fill: none;
            stroke: var(--gold);
            stroke-width: 2px;
            vector-effect: non-scaling-stroke;
            filter: drop-shadow(0 0 5px var(--gold));
        }

        /* === 2. CHECKPOINTS (Punctele prin care trece linia) === */
        .checkpoint {
            width: 10px; height: 10px; background: var(--gold);
            border-radius: 50%; position: absolute;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 20px var(--gold);
            z-index: 10;
        }

        /* === 3. SECTIONS === */
        section { position: relative; z-index: 1; padding: 10vh 5vw; }
        .full-h { min-height: 100vh; display: flex; align-items: center; justify-content: center; }

        /* HERO */
        .hero-title { font-size: clamp(4rem, 12vw, 15rem); line-height: 0.8; opacity: 0; transform: translateY(50px); }
        
        /* IMAGES */
        .life-img {
            width: 100%; height: 500px; object-fit: cover;
            filter: grayscale(100%) brightness(0.7);
            transition: filter 1s ease;
            border: 1px solid var(--gold-dim);
        }
        .life-img.active { filter: grayscale(0%) brightness(1); border-color: var(--gold); }

        /* CARD STYLES */
        .info-card {
            background: rgba(18, 18, 18, 0.9);
            border: 1px solid rgba(212, 175, 55, 0.2);
            padding: 40px;
            backdrop-filter: blur(10px);
        }

        /* GALLERY SCROLL */
        .gallery-strip { display: flex; gap: 20px; overflow: hidden; width: 200%; }
        .gal-img { width: 400px; height: 500px; object-fit: cover; flex-shrink: 0; opacity: 0.6; transition: 0.5s; }
        .gal-img:hover { opacity: 1; }

        /* FORM */
        input, select {
            width: 100%; background: transparent; border: none; border-bottom: 1px solid #333;
            color: white; padding: 20px 0; font-family: 'Boska', serif; font-size: 1.5rem;
            outline: none; transition: 0.3s;
        }
        input:focus { border-color: var(--gold); }

    </style>
</head>
<body>

    <div class="line-container" id="svgContainer">
        <svg width="100%" height="100%">
            <path id="theLine" d="" />
        </svg>
    </div>

    <main id="mainContent">

        <section class="full-h flex-col text-center relative" id="sec-hero">
            <div class="checkpoint" style="top: 20%; left: 50%;"></div> <p class="text-[var(--gold)] tracking-[0.5em] uppercase text-xs mb-10">Începutul</p>
            <h1 class="hero-title font-serif">MATEI</h1>
            <div class="font-hand text-[8vw] text-[var(--gold)] my-[-2vw] relative z-10">&</div>
            <h1 class="hero-title font-serif">ELENA</h1>
            
            <div class="checkpoint" style="bottom: 10%; left: 50%;"></div> </section>


        <section class="py-20 text-center relative" id="sec-date">
            <div class="info-card max-w-2xl mx-auto relative">
                <div class="checkpoint" style="top: 0; left: 50%;"></div> <h2 class="text-6xl font-serif mb-4">24 August</h2>
                <p class="text-xl tracking-widest text-[var(--gold)]">2025</p>
                <div class="h-20"></div> <p class="font-hand text-4xl opacity-70">"Ziua în care timpul s-a oprit"</p>
                
                <div class="checkpoint" style="bottom: 0; left: 50%;"></div> </div>
        </section>


        <section class="min-h-screen flex items-center relative" id="sec-he">
            <div class="w-full grid grid-cols-1 md:grid-cols-2 gap-20 items-center">
                <div class="relative order-2 md:order-1">
                    <div class="checkpoint" style="top: 50%; right: -10px;"></div> <img src="https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=800" class="life-img reveal-img">
                </div>
                <div class="text-left order-1 md:order-2">
                    <span class="text-[var(--gold)] text-xs uppercase tracking-widest">El este</span>
                    <h2 class="text-6xl font-serif mb-6">MATEI</h2>
                    <p class="opacity-70 leading-relaxed max-w-md">
                        Un vizionar pragmatic. Cel care construiește fundația pe care dansăm.
                    </p>
                </div>
            </div>
        </section>


        <section class="min-h-screen flex items-center relative" id="sec-she">
            <div class="w-full grid grid-cols-1 md:grid-cols-2 gap-20 items-center">
                <div class="text-right flex flex-col items-end">
                    <span class="text-[var(--gold)] text-xs uppercase tracking-widest">Ea este</span>
                    <h2 class="text-6xl font-serif mb-6">ELENA</h2>
                    <p class="opacity-70 leading-relaxed max-w-md">
                        Sufletul culorilor. Cea care aduce lumină în cele mai întunecate încăperi.
                    </p>
                </div>
                <div class="relative">
                    <div class="checkpoint" style="top: 50%; left: -10px;"></div> <img src="https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=800" class="life-img reveal-img">
                </div>
            </div>
        </section>


        <section class="min-h-screen flex items-center justify-center relative" id="sec-loc">
            <div class="absolute inset-0 z-0 opacity-20">
                <img src="https://images.unsplash.com/photo-1519167758481-83f550bb49b3?w=1600" class="w-full h-full object-cover">
            </div>
            
            <div class="info-card relative z-10 text-center w-full max-w-4xl border-[var(--gold)]">
                <div class="checkpoint" style="top: -20px; left: 50%;"></div>
                
                <h2 class="text-5xl md:text-7xl font-serif mb-10">PALATUL<br>NOBLESSE</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-10 text-left border-t border-[var(--gold-dim)] pt-10">
                    <div>
                        <h4 class="text-[var(--gold)] uppercase tracking-widest mb-2">Ceremonia</h4>
                        <p class="text-xl">Ora 16:00</p>
                        <p class="opacity-50 text-sm">Grădina de Vară</p>
                    </div>
                    <div>
                        <h4 class="text-[var(--gold)] uppercase tracking-widest mb-2">Recepția</h4>
                        <p class="text-xl">Ora 19:00</p>
                        <p class="opacity-50 text-sm">Sala Oglinzilor</p>
                    </div>
                </div>

                <div class="checkpoint" style="bottom: -20px; left: 50%;"></div>
            </div>
        </section>


        <section class="py-20 relative overflow-hidden" id="sec-gal">
            <div class="mb-10 text-center">
                <div class="checkpoint" style="position:relative; display:inline-block; margin-bottom:20px;"></div>
                <h2 class="text-4xl font-serif">Firul Amintirilor</h2>
            </div>
            
            <div class="gallery-strip" id="galleryStrip">
                <img src="https://images.unsplash.com/photo-1511285560982-1351cdeb9821?w=600" class="gal-img">
                <img src="https://images.unsplash.com/photo-1621621667797-e06afc217fb0?w=600" class="gal-img">
                <img src="https://images.unsplash.com/photo-1583939003579-730e3918a45a?w=600" class="gal-img">
                <img src="https://images.unsplash.com/photo-1522673607200-1645062cd495?w=600" class="gal-img">
            </div>
        </section>


        <section class="min-h-screen flex items-center justify-center relative" id="sec-rsvp">
            <div class="w-full max-w-lg text-center">
                <div class="checkpoint" style="margin: 0 auto 40px auto; position:relative;"></div>
                
                <h2 class="text-5xl font-serif mb-2">Leagă Nodul</h2>
                <p class="text-[var(--gold)] font-hand text-3xl mb-12">Confirmă prezența</p>

                <form class="text-left space-y-8">
                    <div>
                        <label class="text-xs uppercase tracking-widest text-gray-500">Nume</label>
                        <input type="text" placeholder="ex: Popescu Ion">
                    </div>
                    <div class="flex gap-8">
                        <div class="w-1/2">
                            <label class="text-xs uppercase tracking-widest text-gray-500">Persoane</label>
                            <select>
                                <option>1</option>
                                <option>2</option>
                            </select>
                        </div>
                        <div class="w-1/2">
                            <label class="text-xs uppercase tracking-widest text-gray-500">Răspuns</label>
                            <select>
                                <option>Prezent</option>
                                <option>Absent</option>
                            </select>
                        </div>
                    </div>
                    <button class="w-full py-4 mt-8 border border-[var(--gold)] text-[var(--gold)] hover:bg-[var(--gold)] hover:text-black transition uppercase tracking-widest">
                        Trimite
                    </button>
                </form>
                
                <footer class="mt-20 opacity-30 text-xs">
                    THE GOLDEN THREAD © 2025
                </footer>
            </div>
        </section>

    </main>

    <script>
        // === 1. SETUP ===
        gsap.registerPlugin(ScrollTrigger);
        const lenis = new Lenis({ duration: 1.2, smooth: true });
        function raf(time) { lenis.raf(time); requestAnimationFrame(raf); }
        requestAnimationFrame(raf);

        // === 2. GENERARE DINAMICĂ A LINIEI (ALGORITMUL COMPLEX) ===
        function drawTheLine() {
            const svg = document.getElementById('svgContainer');
            const path = document.getElementById('theLine');
            const points = document.querySelectorAll('.checkpoint');
            const main = document.getElementById('mainContent');
            
            // Resize SVG to fit content height
            svg.style.height = main.scrollHeight + 'px';

            let d = "";
            let positions = [];

            // 1. Colectăm coordonatele tuturor punctelor
            points.forEach((pt, i) => {
                const rect = pt.getBoundingClientRect();
                const scrollY = window.scrollY;
                const x = rect.left + rect.width / 2;
                const y = rect.top + scrollY + rect.height / 2;
                positions.push({x, y});
            });

            // 2. Construim Path-ul (Curbe Bezier)
            if (positions.length > 0) {
                d = `M ${positions[0].x} ${positions[0].y}`; // Move to start

                for (let i = 0; i < positions.length - 1; i++) {
                    const p1 = positions[i];
                    const p2 = positions[i+1];
                    
                    // Calculăm puncte de control pentru curbe fine (Sigmoid)
                    // Punctele de control sunt la jumătatea distanței pe Y
                    const cp1y = p1.y + (p2.y - p1.y) / 2;
                    const cp2y = p1.y + (p2.y - p1.y) / 2;

                    // Curba Bezier Cubică: C cp1x cp1y, cp2x cp2y, x y
                    d += ` C ${p1.x} ${cp1y}, ${p2.x} ${cp2y}, ${p2.x} ${p2.y}`;
                }
            }

            path.setAttribute('d', d);

            // 3. Animăm Desenarea Liniei
            const length = path.getTotalLength();
            
            // Setăm linia ca fiind "nevăzută" inițial
            path.style.strokeDasharray = length;
            path.style.strokeDashoffset = length;

            // GSAP ScrollTrigger pentru a "desena" linia pe măsură ce scrollezi
            gsap.fromTo(path, 
                { strokeDashoffset: length },
                {
                    strokeDashoffset: 0,
                    ease: "none",
                    scrollTrigger: {
                        trigger: "body",
                        start: "top top",
                        end: "bottom bottom",
                        scrub: 1
                    }
                }
            );
        }

        // Desenăm la load și la resize
        window.addEventListener('load', drawTheLine);
        window.addEventListener('resize', () => {
            // Mic delay pentru a aștepta recalcularea layout-ului
            setTimeout(drawTheLine, 100);
        });


        // === 3. TEXT REVEALS ===
        gsap.to('.hero-title', {
            y: 0, opacity: 1, duration: 1.5, stagger: 0.2, ease: "power4.out"
        });

        // === 4. IMAGE BLOOM EFFECT ===
        // Când linia ajunge în dreptul imaginii, aceasta se "aprinde"
        const images = document.querySelectorAll('.reveal-img');
        images.forEach(img => {
            ScrollTrigger.create({
                trigger: img,
                start: "top 60%", // Când imaginea e la 60% din ecran
                onEnter: () => img.classList.add('active'),
                onLeaveBack: () => img.classList.remove('active')
            });
        });

        // === 5. HORIZONTAL GALLERY SCROLL ===
        const galStrip = document.getElementById('galleryStrip');
        gsap.to(galStrip, {
            x: () => -(galStrip.scrollWidth - window.innerWidth),
            ease: "none",
            scrollTrigger: {
                trigger: "#sec-gal",
                pin: true,
                scrub: 1,
                end: () => "+=" + galStrip.scrollWidth
            }
        });

    </script>
</body>
</html>